(()=>{var e={4043:e=>{e.exports=["http://localhost:5173","http://localhost:5000","https://www.ckodon.com"]},5026:(e,t,s)=>{const a=s(4043),n={origin:(e,t)=>{-1===a.indexOf(e)&&e?t(new Error("Not allows to by cors")):t(null,!0)},credentials:!0,optionsSuccessStatus:200};e.exports=n},2190:(e,t,s)=>{const a=s(1185);e.exports=async()=>{try{await a.connect(process.env.DATABASE_URL)}catch(e){console.log(e)}}},4980:(e,t,s)=>{const a=s(9149),n=s(5122),r=s(2776)((async(e,t)=>{const{userId:s}=e.body;if(!s)return t.status(400).json({message:"All fields are required"});if(!await n.findById(s).lean().exec())return t.status(400).json({message:"User not found"});const r=await a.findOne({user:s}).lean().exec();t.json(r)}));e.exports={getActivityOfUser:r}},5254:(e,t,s)=>{const a=s(8281),n=s(5122),r=s(2776)((async(e,t)=>{const{userId:s}=e.body;if(!s)return t.status(400).json({message:"All fields are required"});if(!await n.findById(s).lean().exec())return t.status(400).json({message:"User not found"});const r=await a.findOne({user:s}).lean().exec();t.json(r)}));e.exports={getAidOfUser:r}},9306:(e,t,s)=>{const a=s(8958),n=s(5122),r=s(2776)((async(e,t)=>{const{userId:s}=e.body;if(!s)return t.status(400).json({message:"All fields are required"});if(!await n.findById(s).lean().exec())return t.status(400).json({message:"User not found"});const r=await a.find({user:s}).lean().exec();t.json(r)}));e.exports={getEssayOfUser:r}},7163:(e,t,s)=>{const a=s(2884),n=s(5122),r=s(2776)((async(e,t)=>{const{userId:s}=e.params;if(!s)return t.status(400).json({message:"All fields are required"});if(!await n.findById(s).lean().exec())return t.status(400).json({message:"User not found"});const r=await a.findOne({user:s}).lean().exec();t.json(r)}));e.exports={getHonorOfUser:r}},7038:(e,t,s)=>{const a=s(2181),n=s(5122),r=s(2776)((async(e,t)=>{const{userId:s}=e.body;if(!s)return t.status(400).json({message:"All fields are required"});if(!await n.findById(s).lean().exec())return t.status(400).json({message:"User not found"});const r=await a.findOne({user:s}).lean().exec();t.json(r)}));e.exports={getRecommendationOfUser:r}},6058:(e,t,s)=>{const a=s(3010),n=s(2884),r=s(9149),o=s(8281),i=s(8958),d=s(2181),u=s(5122),c=s(2776),l=c((async(e,t)=>{const{userId:s}=e.params;if(!s)return t.status(400).json({message:"All fields are required"});if(!await u.findById(s).lean().exec())return t.status(400).json({message:"User not found"});const c=await a.find({user:s}).lean().sort({updatedAt:-1}),l=await Promise.all(c.map((async e=>{let s;switch(e.onModel){case"Honor":s=n;break;case"Activity":s=r;break;case"Aid":s=o;break;case"Essay":s=i;break;case"Recommendation":s=d;break;default:return t.status(400).json({error:"Invalid document model"})}const a=await s.findById(e.documentId);return a?{...e,document:a}:t.status(404).json({error:"Document not found"})})));t.json(l)})),m=c((async(e,t)=>{const{id:s}=e.params,c=await a.findById(s).lean();if(!c)return t.status(400).json({message:"Invalid Id"});let l;switch(c.onModel){case"Honor":l=n;break;case"Activity":l=r;break;case"Aid":l=o;break;case"Essay":l=i;break;case"Recommendation":l=d;break;default:return t.status(400).json({error:"Invalid document model"})}let m=await l.findById(c.documentId).lean(),p=await u.findById(c.user).lean();t.json({...c,document:m,user:p})}));e.exports={getReviewByUser:l,getReviewById:m}},963:(e,t,s)=>{const a=s(9149),n=s(5122),r=s(2776),o=r((async(e,t)=>{const s=await a.find().lean().sort({createdAt:-1});if(!s?.length)return t.status(400).json({message:"No activities found"});t.json(s)})),i=r((async(e,t)=>{const{user:s,status:r,submitted:o,activities:i}=e.body;return s&&r&&Array.isArray(i)?await n.findById(s).lean().exec()?await a.findOne({user:s}).lean().exec()?t.status(409).json({message:"It seems you have already created an activity"}):await a.create({user:s,status:r,submitted:o,activities:i})?t.status(201).json({message:"Activity created successfully"}):t.status(400).json({message:"Invalid applicant data received"}):t.status(400).json({message:"user not found"}):t.status(400).json({message:"All fields are required"})})),d=r((async(e,t)=>{const{id:s,status:n,submitted:r,activities:o}=e.body;if(!s||!n||!Array.isArray(o))return t.status(400).json({message:"All field must be completed"});const i=await a.findById(s).exec();if(!i)return t.status(400).json({message:"Activity not found"});const d=await a.findOne({id:s}).lean().exec();if(d&&d?._id.toString()!==s)return t.status(409).json({message:"Activity already exist"});i.status=n,i.submitted=r,i.activities=o,await i.save()?t.json({message:"activity updated succesfully"}):t.json({message:"failed to update"})})),u=r((async(e,t)=>{const{id:s}=e.body;s||t.status(400).json({message:"Activity ID required"});const n=await a.findById(s).exec();if(!n)return t.status(400).json({message:"Activity not found"});await n.deleteOne(),t.json("Activity has been deleted")}));e.exports={getActivities:o,addNewActivity:i,updateActivity:d,deleteActivity:u}},4745:(e,t,s)=>{const a=s(7935),n=s(2776),r=s(7096),o=n((async(e,t)=>{const s=await a.find().select("-password").lean().sort({updatedAt:-1});if(!s?.length)return t.status(400).json({message:"No admins found"});t.json(s)})),i=n((async(e,t)=>{const{firstName:s,lastName:n,email:o,residence:i,role:d,school:u,password:c,isActive:l,phone:m,gender:p,avatar:y}=e.body;if(!(s&&n&&o&&i&&d&&u&&c&&p&&"boolean"==typeof l))return t.status(400).json({message:"all fileds are required"});if(await a.findOne({email:o}).lean().exec())return t.status(409).json({message:"It seems this email aleady exist"});const g={firstName:s,lastName:n,email:o,residence:i,role:d,school:u,password:await r.hash(c,10),gender:p,phone:m,avatar:y};await a.create(g)?t.status(201).json({message:`${s} ${n} has been added successfuly`}):t.status(400).json({message:"Invalid admin data recieved"})})),d=n((async(e,t)=>{const{id:s,firstName:n,lastName:o,email:i,residence:d,role:u,school:c,password:l,isActive:m,gender:p,phone:y,avatar:g}=e.body;if(!(s&&n&&o&&i&&d&&c&&m))return t.status(400).json({message:"You must filled the form"});const f=await a.findById(s).exec();if(!f)return t.status(400).json({message:"Admin not found"});const w=await a.findOne({email:i}).lean().exec();if(w&&w?._id.toString()!==s)return t.status(409).json({message:"Duplicate email"});f.firstName=n,f.lastName=o,f.email=i,f.residence=d,f.school=c,f.isActive=m,f.role=u,f.gender=p,f.phone=y,f.avatar=g,l&&(f.password=await r.hash(l,10));const j=await f.save();t.json({message:`${j.firstName} updated succesfully`})})),u=n((async(e,t)=>{const{id:s}=e.body;s||t.status(400).json({message:"Admin ID required"});const n=await a.findById(s).exec();if(!n)return t.status(400).json({message:"Admin not found"});const r=`${(await n.deleteOne()).firstName} has been deleted`;t.json(r)}));e.exports={getAllAdmins:o,addNewAdmin:i,updateAdmin:d,deleteAdmin:u}},8385:(e,t,s)=>{const a=s(8281),n=s(5122),r=s(2776),o=r((async(e,t)=>{const s=await a.find().lean().sort({createdAt:-1});if(!s?.length)return t.status(400).json({message:"No aids found"});t.json(s)})),i=r((async(e,t)=>{const{user:s,status:r,submitted:o,aids:i}=e.body;return s&&r&&Array.isArray(i)?await n.findById(s).lean().exec()?await a.findOne({user:s}).lean().exec()?t.status(409).json({message:"It seems you have already created an aid"}):await a.create({user:s,status:r,submitted:o,aids:i})?t.status(201).json({message:"Aid created successfully"}):t.status(400).json({message:"Invalid applicant data received"}):t.status(400).json({message:"user not found"}):t.status(400).json({message:"All fields are required"})})),d=r((async(e,t)=>{const{id:s,status:n,submitted:r,aids:o}=e.body;if(!n||!Array.isArray(o))return t.status(400).json({message:"All field must be completed"});const i=await a.findById(s).exec();if(!i)return t.status(400).json({message:"Aid not found"});const d=await a.findOne({id:s}).lean().exec();if(d&&d?._id.toString()!==s)return t.status(409).json({message:"Aid already exist"});i.status=n,i.submitted=r,i.aids=o,await i.save()?t.json({message:"aid updated succesfully"}):t.json({message:"failed to update"})})),u=r((async(e,t)=>{const{id:s}=e.body;s||t.status(400).json({message:"Aid ID required"});const n=await a.findById(s).exec();if(!n)return t.status(400).json({message:"Aid not found"});await n.deleteOne(),t.json("Aid has been deleted")}));e.exports={getAids:o,addNewAid:i,updateAid:d,deleteAid:u}},213:(e,t,s)=>{const a=s(5122),n=s(7935),r=s(7096),o=s(9344),i=s(2776),d=i((async(e,t)=>{const{role:s,email:i,password:d}=e.body;if(!i||!d||!s)return t.status(400).json({message:"All fields are required"});let u;switch(s){case"admin":u=n;break;case"undergraduate":u=a;break;default:return t.status(401).json({message:"Invalid role"})}const c=await u.findOne({email:i}).exec();if(!c||!c.isActive)return t.status(401).json({message:"Unauthorized"});if(!await r.compare(d,c.password))return t.status(401).json({message:"Unauthorized"});const l=o.sign({UserInfo:{...c}},process.env.ACCESS_TOKEN_SECRET,{expiresIn:"15m"}),m=o.sign({UserInfo:{...c}},process.env.REFRESH_TOKEN_SECRET,{expiresIn:"2d"});t.cookie("jwt",m,{httpOnly:!0,sameSite:"Lax",maxAge:1728e5}),t.json({accessToken:l})}));e.exports={login:d,refresh:(e,t)=>{const s=e.cookies;if(!s?.jwt)return t.status(401).json({message:"Unauthorized"});const r=s.jwt;o.verify(r,process.env.REFRESH_TOKEN_SECRET,i((async(e,s)=>{if(e)return t.status(403).json({message:"Forbidden"});let r;switch(console.log(s),s.UserInfo._doc.role){case"admin":r=n;break;case"undergraduate":r=a;break;default:return t.status(401).json({message:"Invalid role"})}const i=await r.findOne({email:s.UserInfo._doc.email}).exec();if(!i)return t.status(401).json({message:"Unauthorized"});const d=o.sign({UserInfo:{...i}},process.env.ACCESS_TOKEN_SECRET,{expiresIn:"15m"});t.json({accessToken:d})})))},logout:(e,t)=>{const s=e.cookies;if(!s?.jwt)return t.sendStatus(204);t.clearCookie("jwt",{httpOnly:!0,sameSite:"None",secure:!0}),t.json({message:"Cookie cleared"})}}},1760:(e,t,s)=>{const a=s(8958),n=s(5122),r=s(2776),o=r((async(e,t)=>{const s=await a.find().lean().sort({createdAt:-1});if(!s?.length)return t.status(400).json({message:"No essays found"});t.json(s)})),i=r((async(e,t)=>{const{user:s,status:r,submitted:o,essays:i,schoolName:d}=e.body;return s&&r&&Array.isArray(i)&&d?await n.findById(s).lean().exec()?await a.findOne({user:s,schoolName:d}).lean().exec()?t.status(409).json({message:"It seems you have already created an essay with same school Name"}):await a.create({user:s,status:r,submitted:o,essays:i,schoolName:d})?t.status(201).json({message:"Essay created successfully"}):t.status(400).json({message:"Invalid applicant data received"}):t.status(400).json({message:"user not found"}):t.status(400).json({message:"All fields are required"})})),d=r((async(e,t)=>{const{id:s,status:n,submitted:r,essays:o,schoolName:i}=e.body;if(!n||!Array.isArray(o)||!i)return t.status(400).json({message:"All field must be completed"});const d=await a.findById(s).exec();if(!d)return t.status(400).json({message:"Essay not found"});const u=await a.findOne({id:s}).lean().exec();if(u&&u?._id.toString()!==s)return t.status(409).json({message:"Essay already exist"});d.status=n,d.submitted=r,d.essays=o,d.schoolName=i,await d.save()?t.json({message:"essay updated succesfully"}):t.json({message:"failed to update"})})),u=r((async(e,t)=>{const{id:s}=e.body;s||t.status(400).json({message:"Essay ID required"});const n=await a.findById(s).exec();if(!n)return t.status(400).json({message:"Essay not found"});await n.deleteOne(),t.json("Essay has been deleted")}));e.exports={getEssays:o,addNewEssay:i,updateEssay:d,deleteEssay:u}},15:(e,t,s)=>{const a=s(2884),n=s(5122),r=s(2776),o=r((async(e,t)=>{const s=await a.find().lean().sort({createdAt:-1});if(!s?.length)return t.status(400).json({message:"No honors found"});t.json(s)})),i=r((async(e,t)=>{const{user:s,status:r,submitted:o,honors:i,voiceNOtes:d,additionalDocs:u,submittedBefore:c}=e.body;return s&&r&&Array.isArray(i)&&Array.isArray(d)&&Array.isArray(u)?await n.findById(s).lean().exec()?await a.findOne({user:s}).lean().exec()?t.status(409).json({message:"It seems you have already created an honor"}):await a.create({user:s,status:r,submitted:o,honors:i,voiceNOtes:d,additionalDocs:u,submittedBefore:c})?t.status(201).json({message:"Honor created successfully"}):t.status(400).json({message:"Invalid applicant data received"}):t.status(400).json({message:"user not found"}):t.status(400).json({message:"All fields are required before you can create honor"})})),d=r((async(e,t)=>{const{id:s,status:n,submitted:r,honors:o,voiceNOtes:i,additionalDocs:d,submittedBefore:u}=e.body;if(!n||!Array.isArray(o))return t.status(400).json({message:"All field must be completed"});const c=await a.findById(s).exec();if(!c)return t.status(400).json({message:"Honor not found"});const l=await a.findOne({id:s}).lean().exec();if(l&&l?._id.toString()!==s)return t.status(409).json({message:"Honor already exist"});c.status=n,c.submitted=r,c.honors=o,c.submittedBefore=u,c.voiceNOtes=i,c.additionalDocs=d,await c.save()?t.json({message:"honor updated succesfully"}):t.json({message:"failed to update"})})),u=r((async(e,t)=>{const{id:s}=e.body;s||t.status(400).json({message:"Honor ID required"});const n=await a.findById(s).exec();if(!n)return t.status(400).json({message:"Honor not found"});await n.deleteOne(),t.json("Honor has been deleted")}));e.exports={getHonors:o,addNewHonor:i,updateHonor:d,deleteHonor:u}},1139:(e,t,s)=>{const a=s(2181),n=s(5122),r=s(2776),o=r((async(e,t)=>{const s=await a.find().lean().sort({createdAt:-1});if(!s?.length)return t.status(400).json({message:"No recommendations found"});t.json(s)})),i=r((async(e,t)=>{const{user:s,status:r,submitted:o,recommendations:i}=e.body,d=!s||!r||!Array.isArray(i);return console.log(d),d?t.status(400).json({message:"All fields are required"}):await n.findById(s).lean().exec()?await a.findOne({user:s}).lean().exec()?t.status(409).json({message:"It seems you have already created an recommendation"}):await a.create({user:s,status:r,submitted:o,recommendations:i})?t.status(201).json({message:"Recommendation created successfully"}):t.status(400).json({message:"Invalid applicant data received"}):t.status(400).json({message:"user not found"})})),d=r((async(e,t)=>{const{id:s,status:n,submitted:r,recommendations:o}=e.body;if(!n||!Array.isArray(o))return t.status(400).json({message:"All field must be completed"});const i=await a.findById(s).exec();if(!i)return t.status(400).json({message:"Recommendation not found"});const d=await a.findOne({id:s}).lean().exec();if(d&&d?._id.toString()!==s)return t.status(409).json({message:"Recommendation already exist"});i.status=n,i.submitted=r,i.recommendations=o,await i.save()?t.json({message:"recommendation updated succesfully"}):t.json({message:"failed to update"})})),u=r((async(e,t)=>{const{id:s}=e.body;s||t.status(400).json({message:"Recommendation ID required"});const n=await a.findById(s).exec();if(!n)return t.status(400).json({message:"Recommendation not found"});await n.deleteOne(),t.json("Recommendation has been deleted")}));e.exports={getRecommendations:o,addNewRecommendation:i,updateRecommendation:d,deleteRecommendation:u}},4477:(e,t,s)=>{const a=s(3010),n=s(2884),r=s(5122),o=s(2776),i=s(9149),d=s(8281),u=s(8958),c=s(2181),l=(s(3010),o((async(e,t)=>{const s=await a.find().lean().sort({updatedAt:-1});if(!s?.length)return t.status(400).json({message:"No Reviews found"});const o=await Promise.all(s.map((async e=>{const s=await r.findById(e.user).select("-password").lean().exec();let a;switch(e.onModel){case"Honor":a=n;break;case"Activity":a=i;break;case"Aid":a=d;break;case"Essay":a=u;break;case"Recommendation":a=c;break;default:return t.status(400).json({error:"Invalid document model"})}const o=await a.findById(e.documentId);return o?{...e,student:{...s},document:o}:t.status(404).json({error:"Document not found"})})));t.json(o)}))),m=o((async(e,t)=>{const{deadline:s,status:o,documentId:l,onModel:m,user:p}=e.body;if(!(p&&o&&l&&m))return t.status(400).json({message:"All fields are required"});if(!await r.findById(p).lean().exec())return t.status(400).json({message:"User not found"});let y;switch(m){case"Honor":y=n;break;case"Activity":y=i;break;case"Aid":y=d;break;case"Essay":y=u;break;case"Recommendation":y=c;break;default:return t.status(400).json({error:"Invalid document model"})}return await y.findOne({user:p,_id:l})?await a.findOne({user:p,documentId:l}).lean().exec()?t.status(409).json({message:"It seems you have have submitted this document before"}):await a.create({deadline:s,status:o,documentId:l,onModel:m,user:p})?t.status(201).json({message:"You have submitted successfully"}):t.status(400).json({message:"Invalid  data received"}):t.status(400).json({message:"Invalid document or user not own this document"})})),p=o((async(e,t)=>{const{deadline:s,status:n,document:r,model:o,user:i}=e.body;if(!r||!n||!o)return t.status(400).json({message:"All field must be completed"});const d=await a.findOne({user:i,documentId:r,onModel:o}).exec();if(!d)return t.status(400).json({message:"Reviewed document not found"});d.status=n,d.deadline=s,await d.save()?t.json({message:"Review updated succesfully"}):t.json({message:"failed to update"})})),y=o((async(e,t)=>{const{document:s,model:n,user:r}=e.query;s&&n&&r||t.status(400).json({message:"All fields required"});const o=await a.findOne({user:r,documentId:s,onModel:n}).exec();return o?await o.deleteOne()?t.status(200).json({message:"Deleted "}):void 0:t.status(400).json({message:"Review not found"})}));e.exports={getAllReviews:l,addNewReview:m,updateReview:p,deleteReview:y}},3597:(e,t,s)=>{const a=s(5122),n=s(2776),r=s(7096),o=n((async(e,t)=>{const s=await a.find().select("-password").lean().sort({createdAt:-1});if(!s?.length)return t.status(400).json({message:"No users found"});t.json(s)})),i=n((async(e,t)=>{const{firstName:s,lastName:n,email:o,residence:i,role:d,school:u,password:c,isActive:l,phone:m,gender:p,avatar:y}=e.body;if(!(s&&n&&o&&i&&d&&u&&c&&p&&"boolean"==typeof l))return t.status(400).json({message:"all fileds are required"});if(await a.findOne({email:o}).lean().exec())return t.status(409).json({message:"It seems this email aleady exist"});const g={firstName:s,lastName:n,email:o,residence:i,role:d,school:u,password:await r.hash(c,10),gender:p,phone:m,avatar:y};await a.create(g)?t.status(201).json({message:`${s} ${n} has been added successfuly`}):t.status(400).json({message:"Invalid user data recieved"})})),d=n((async(e,t)=>{const{id:s,firstName:n,lastName:o,email:i,residence:d,role:u,school:c,password:l,isActive:m,gender:p,phone:y,avatar:g}=e.body;if(!(s&&n&&o&&i&&d&&c&&m))return t.status(400).json({message:"You must filled the form"});const f=await a.findById(s).exec();if(!f)return t.status(400).json({message:"User not found"});const w=await a.findOne({email:i}).lean().exec();if(w&&w?._id.toString()!==s)return t.status(409).json({message:"Duplicate email"});f.firstName=n,f.lastName=o,f.email=i,f.residence=d,f.school=c,f.isActive=m,f.role=u,f.gender=p,f.phone=y,f.avatar=g,l&&(f.password=await r.hash(l,10));const j=await f.save();t.json({message:`${j.firstName} updated succesfully`})})),u=n((async(e,t)=>{const{id:s}=e.body;s||t.status(400).json({message:"User ID required"});const n=await a.findById(s).exec();if(!n)return t.status(400).json({message:"User not found"});const r=`${(await n.deleteOne()).firstName} has been deleted`;t.json(r)}));e.exports={getAllUsers:o,addNewUser:i,updateUser:d,deleteUser:u}},8298:(e,t,s)=>{const a=s(115),n=s(2776),r=n((async(e,t)=>{const s=await a.find().lean().sort({createdAt:-1});if(!s?.length)return t.status(400).json({message:"No applicant found"});t.json(s)})),o=n((async(e,t)=>{const{firstName:s,lastName:n,email:r,residence:o,role:i,recentSchool:d,applicationStatus:u,dateOfBirth:c,currentUniversity:l,yearOfCompletion:m,wassceText:p,essayQuestion:y,essayAnswer:g,gender:f,phone:w,whatsappNumber:j,level:h}=e.body,v=!(s&&n&&r&&o&&i&&d&&c&&f&&m&&p&&y&&g);return console.log(v),v?t.status(400).json({message:"All fields are required"}):await a.findOne({email:r}).lean().exec()?t.status(409).json({message:"It seems you have already applied"}):await a.create({firstName:s,lastName:n,email:r,residence:o,role:i,recentSchool:d,applicationStatus:u,dateOfBirth:c,currentUniversity:l,yearOfCompletion:m,wassceText:p,essayQuestion:y,essayAnswer:g,gender:f,phone:w,whatsappNumber:j,level:h})?t.status(201).json({message:"Your application has been submitted successfuly"}):t.status(400).json({message:"Invalid applicant data received"})})),i=n((async(e,t)=>{const{id:s,applicationStatus:n}=e.body;if(!s||!n)return t.status(400).json({message:"All field must be completed"});const r=await a.findById(s).exec();if(!r)return t.status(400).json({message:"applicant not found"});r.applicationStatus=n,await r.save(),t.json({message:`${r.firstName} updated succesfully`})}));e.exports={getAllUndergraduateApplicants:r,addNewApplicant:o,updateApplicant:i}},6282:(e,t,s)=>{const{logEvents:a}=s(9949);e.exports=(e,t,s,n)=>{a(`${e.name}: ${e.message}\t${t.method}\t${t.url}\t${t.headers.origin}`,"errLog.log"),console.log(e.stack);const r=s.statusCode?s.statusCode:500;s.status(r),s.json({message:e.message,isError:!0})}},9949:(e,t,s)=>{const{format:a}=s(4146),{v4:n}=s(5828),r=s(7147),o=s(7147).promises,i=s(1017),d=async(e,t)=>{const s=`${a(new Date,"yyyyMMdd\tHH:mm:ss")}\t${n()}\t${e}\n`;try{r.existsSync(i.join(__dirname,"..","logs"))||await o.mkdir(i.join(__dirname,"..","logs")),await o.appendFile(i.join(__dirname,"..","logs",t),s)}catch(e){console.log(e)}};e.exports={logEvents:d,logger:(e,t,s)=>{d(`${e.method}\t${e.url}\t${e.headers.origin}`,"reqLog.log"),console.log(`${e.method} ${e.path}`),s()}}},2606:(e,t,s)=>{const a=s(6985),{logEvents:n}=s(9949),r=a({windowMs:6e4,max:5,message:{message:"Too many login attempts from this IP, please try again after a 60 second pause"},handler:(e,t,s,a)=>{n(`Too Many Requests: ${a.message.message}\t${e.method}\t${e.url}\t${e.headers.origin}`,"errLog.log"),t.status(a.statusCode).send(a.message)},standardHeaders:!0,legacyHeaders:!1});e.exports=r},8106:(e,t,s)=>{const a=s(9344);e.exports=(e,t,s)=>{const n=e.headers.authorization||e.headers.Authorization;if(!n?.startsWith("Bearer "))return t.status(401).json({message:"Unauthorized"});const r=n.split(" ")[1];a.verify(r,process.env.ACCESS_TOKEN_SECRET,((a,n)=>{if(a)return t.status(403).json({message:"Forbidden"});e.email=n.UserInfo.email,e.role=n.UserInfo.role,s()}))}},9149:(e,t,s)=>{const a=s(1185),n=new a.Schema({user:{type:a.Schema.Types.ObjectId,required:!0,ref:"User"},status:{type:String,enum:["resolved","unresolved"],default:"unresolved"},submitted:{type:Boolean,default:!1},voiceNOtes:[{voiceNote:{type:String,required:!1},timeDate:{type:Date,required:!1}}],additionalDocs:[{doc:{type:String,required:!1},timeDate:{type:Date,required:!1}}],activities:[{position:{type:String,required:!1},organisationName:{type:String,required:!1},description:{type:String,required:!1},didItInGrade9:{type:Boolean,default:!1},didItInGrade10:{type:Boolean,default:!1},didItInGrade11:{type:Boolean,default:!1},didItInGrade12:{type:Boolean,default:!1},didItAfterSchool:{type:Boolean,default:!1},participstedInSchoolDay:{type:Boolean,default:!1},participstedInSchoolBreak:{type:Boolean,default:!1},participstedAllYear:{type:Boolean,default:!1},hourSpentPerYear:{type:String,required:!1},weeksSpentPerYear:{type:String,required:!1},comments:[{comment:{type:String,required:!1},timeDate:{type:Date,required:!1}}],rate:{type:String,enum:["bad","normal","good","notRated"],default:"notRated"}}]},{timestamps:!0});e.exports=a.model("Activity",n)},7935:(e,t,s)=>{const a=s(1185),n=new a.Schema({firstName:{type:String,required:!0},lastName:{type:String,required:!0},email:{type:String,required:!0,unique:!0},residence:{type:String,required:!0},role:{type:String,default:"admin"},school:{type:String,required:!0},password:{type:String,required:!0},isActive:{type:Boolean,default:!0},phone:{type:String,required:!1},gender:{type:String,required:!0},avatar:{type:String,trim:!0,default:"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png",required:!1}},{timestamps:!0});e.exports=a.model("Admin",n)},8281:(e,t,s)=>{const a=s(1185),n=new a.Schema({user:{type:a.Schema.Types.ObjectId,required:!0,ref:"User"},status:{type:String,enum:["resolved","unresolved"],default:"unresolved"},submitted:{type:Boolean,default:!1},aids:[{SchoolName:{type:String,required:!1},comments:[{comment:{type:String,required:!1},timeDate:{type:Date,required:!1}}],totalAnnualIncome:{type:String,required:!1},familySaving:{type:String,required:!1},totalExpensePerYear:{type:String,required:!1},EFC:{type:String,required:!1},voiceNOtes:[{voiceNote:{type:String,required:!1},timeDate:{type:Date,required:!1}}],additionalDocs:[{doc:{type:String,required:!1},timeDate:{type:Date,required:!1}}],rate:{type:String,enum:["approved","rejected","notRated"],default:"notRated",required:!1}}]},{timestamps:!0});e.exports=a.model("Aid",n)},8958:(e,t,s)=>{const a=s(1185),n=new a.Schema({user:{type:a.Schema.Types.ObjectId,required:!0,ref:"User"},status:{type:String,enum:["resolved","unresolved"],default:"unresolved"},submitted:{type:Boolean,default:!1},schoolName:{type:String,required:!0},essays:[{question:{type:String,required:!1},answer:{type:String,required:!1},comments:[{comment:{type:String,required:!1},timeDate:{type:Date,required:!1}}],voiceNOtes:[{voiceNote:{type:String,required:!1},timeDate:{type:Date,required:!1}}],additionalDocs:[{doc:{type:String,required:!1},timeDate:{type:Date,required:!1}}],rate:{type:String,enum:["bad","normal","good","notRated"],default:"notRated",required:!1}}]},{timestamps:!0});e.exports=a.model("Essay",n)},2884:(e,t,s)=>{const a=s(1185),n=new a.Schema({user:{type:a.Schema.Types.ObjectId,required:!0,ref:"User"},status:{type:String,enum:["resolved","unresolved"],default:"unresolved"},submitted:{type:Boolean,default:!1},submittedBefore:{type:Boolean,default:!1},voiceNOtes:[{voiceNote:{type:String,required:!1},timeDate:{type:Date,required:!1}}],additionalDocs:[{doc:{type:String,required:!1},timeDate:{type:Date,required:!1}}],honors:[{honorTitle:{type:String,required:!1},didItInGrade9:{type:Boolean,default:!1},didItInGrade10:{type:Boolean,default:!1},didItInGrade11:{type:Boolean,default:!1},didItInGrade12:{type:Boolean,default:!1},didItAfterSchool:{type:Boolean,default:!1},isRecognisedInSchool:{type:Boolean,default:!1},isRecognisedInState:{type:Boolean,default:!1},isRecognisedNational:{type:Boolean,default:!1},isRecognisedInternational:{type:Boolean,default:!1},comments:[{comment:{type:String,required:!1},timeDate:{type:Date,required:!1}}],rate:{type:String,enum:["bad","normal","good","notRated"],default:"notRated",required:!1}}]},{timestamps:!0});e.exports=a.model("Honor",n)},2181:(e,t,s)=>{const a=s(1185),n=new a.Schema({user:{type:a.Schema.Types.ObjectId,required:!0,ref:"User"},status:{type:String,enum:["resolved","unresolved"],default:"unresolved"},submitted:{type:Boolean,default:!1},recommendations:[{recommenderName:{type:String,required:!1},voiceNOtes:[{voiceNote:{type:String,required:!1},timeDate:{type:Date,required:!1}}],additionalDocs:[{doc:{type:String,required:!1},timeDate:{type:Date,required:!1}}],letters:[{letter:{type:String,required:!1},rate:{type:String,enum:["bad","normal","good","notRated"],default:"notRated",required:!1},comments:[{comment:{type:String,required:!1},timeDate:{type:Date,required:!1}}]}]}]},{timestamps:!0});e.exports=a.model("Recommendation",n)},3010:(e,t,s)=>{const a=s(1185),n=new a.Schema({deadline:{type:Date},status:{type:String,required:!0,default:"unresolved",enum:["unresolved","resolved"]},documentId:{type:a.Schema.Types.ObjectId,refPath:"onModel",required:!0},onModel:{type:String,required:!0,enum:["Honor","Activity","Aid","Essay","Recommendation"]},user:{type:a.Schema.Types.ObjectId,ref:"User",required:!0}},{timestamps:!0});e.exports=a.model("Review",n)},5122:(e,t,s)=>{const a=s(1185),n=new a.Schema({firstName:{type:String,required:!0},lastName:{type:String,required:!0},email:{type:String,required:!0,unique:!0},residence:{type:String,required:!0},role:[{type:String,enum:["undergraduate","mentor"],default:"undergraduate"}],school:{type:String,required:!0},password:{type:String,required:!0},isActive:{type:Boolean,default:!0},phone:{type:String,required:!1},gender:{type:String,required:!0},avatar:{type:String,trim:!0,default:"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png",required:!1}},{timestamps:!0});e.exports=a.model("User",n)},115:(e,t,s)=>{const a=s(1185),n=new a.Schema({firstName:{type:String,required:!0},lastName:{type:String,required:!0},email:{type:String,required:!0},residence:{type:String,required:!0},role:{type:String,default:"undergraduate",required:!0},recentSchool:{type:String,required:!0},applicationStatus:{type:String,default:"pending"},dateOfBirth:{type:Date,require:!0},currentUniversity:{type:String,require:!1},yearOfCompletion:{type:Date,require:!0},wassceText:{type:String,require:!1},essayQuestion:{type:String,require:!0},essayAnswer:{type:String,require:!0},gender:{type:String,require:!0},phone:{type:String,require:!1},whatsappNumber:{type:String,required:!1},level:{type:String,required:!1}},{timestamps:!0});e.exports=a.model("UndergraduteApplicantSchema",n)},7821:(e,t,s)=>{const a=s(6860).Router(),n=s(963),r=s(8106);a.use(r),a.route("/").get(n.getActivities).post(n.addNewActivity).patch(n.updateActivity).delete(n.deleteActivity),e.exports=a},1177:(e,t,s)=>{const a=s(6860).Router(),n=s(4745),r=s(8106);a.use(r),a.route("/").get(n.getAllAdmins).post(n.addNewAdmin).patch(n.updateAdmin).delete(n.deleteAdmin),e.exports=a},2363:(e,t,s)=>{const a=s(6860).Router(),n=s(8385),r=s(8106);a.use(r),a.route("/").get(n.getAids).post(n.addNewAid).patch(n.updateAid).delete(n.deleteAid),e.exports=a},6228:(e,t,s)=>{const a=s(6860).Router(),n=s(213),r=s(2606);a.route("/").post(r,n.login),a.route("/refresh").get(n.refresh),a.route("/logout").post(n.logout),e.exports=a},4271:(e,t,s)=>{const a=s(6860).Router(),n=s(4980),r=s(8106);a.use(r),a.route("/").get(n.getActivityOfUser),e.exports=a},360:(e,t,s)=>{const a=s(6860).Router(),n=s(5254),r=s(8106);a.use(r),a.route("/").get(n.getAidOfUser),e.exports=a},6645:(e,t,s)=>{const a=s(6860).Router(),n=s(9306),r=s(8106);a.use(r),a.route("/").get(n.getEssayOfUser),e.exports=a},1062:(e,t,s)=>{const a=s(6860).Router(),n=s(7163),r=s(8106);a.use(r),a.route("/:userId").get(n.getHonorOfUser),e.exports=a},6587:(e,t,s)=>{const a=s(6860).Router(),n=s(7038),r=s(8106);a.use(r),a.route("/").get(n.getRecommendationOfUser),e.exports=a},4335:(e,t,s)=>{const a=s(6860).Router(),n=s(6058),r=s(8106);a.use(r),a.route("/:id").get(n.getReviewById),e.exports=a},6845:(e,t,s)=>{const a=s(6860).Router(),n=s(6058),r=s(8106);a.use(r),a.route("/:userId").get(n.getReviewByUser),e.exports=a},5225:(e,t,s)=>{const a=s(6860).Router(),n=s(1760),r=s(8106);a.use(r),a.route("/").get(n.getEssays).post(n.addNewEssay).patch(n.updateEssay).delete(n.deleteEssay),e.exports=a},3189:(e,t,s)=>{const a=s(6860).Router(),n=s(15),r=s(8106);a.use(r),a.route("/").get(n.getHonors).post(n.addNewHonor).patch(n.updateHonor).delete(n.deleteHonor),e.exports=a},7768:(e,t,s)=>{const a=s(6860).Router(),n=s(1139),r=s(8106);a.use(r),a.route("/").get(n.getRecommendations).post(n.addNewRecommendation).patch(n.updateRecommendation).delete(n.deleteRecommendation),e.exports=a},8842:(e,t,s)=>{const a=s(6860).Router(),n=s(4477),r=s(8106);a.use(r),a.route("/").get(n.getAllReviews).post(n.addNewReview).patch(n.updateReview).delete(n.deleteReview),e.exports=a},8201:(e,t,s)=>{const a=s(6860).Router(),n=s(1017);a.get("^/$|/index(.html)?",((e,t)=>{t.sendFile(n.join(__dirname,"..","/views","/index.html"))})),e.exports=a},8402:(e,t,s)=>{const a=s(6860).Router(),n=s(3597),r=s(8106);a.use(r),a.route("/").get(n.getAllUsers).post(n.addNewUser).patch(n.updateUser).delete(n.deleteUser),e.exports=a},9548:(e,t,s)=>{const a=s(6860).Router(),n=s(8298);a.route("/").get(n.getAllUndergraduateApplicants).post(n.addNewApplicant).patch(n.updateApplicant),e.exports=a},7096:e=>{"use strict";e.exports=require("bcrypt")},9710:e=>{"use strict";e.exports=require("cookie-parser")},3582:e=>{"use strict";e.exports=require("cors")},4146:e=>{"use strict";e.exports=require("date-fns")},5142:e=>{"use strict";e.exports=require("dotenv")},6860:e=>{"use strict";e.exports=require("express")},5383:e=>{"use strict";e.exports=require("express-async-errors")},2776:e=>{"use strict";e.exports=require("express-async-handler")},6985:e=>{"use strict";e.exports=require("express-rate-limit")},9344:e=>{"use strict";e.exports=require("jsonwebtoken")},1185:e=>{"use strict";e.exports=require("mongoose")},5828:e=>{"use strict";e.exports=require("uuid")},7147:e=>{"use strict";e.exports=require("fs")},1017:e=>{"use strict";e.exports=require("path")}},t={};function s(a){var n=t[a];if(void 0!==n)return n.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,s),r.exports}(()=>{s(5142).config(),s(5383);const e=s(6860),t=e(),a=process.env.PORT||5e3,n=s(1017),{logger:r,logEvents:o}=s(9949),i=s(6282),d=s(9710),u=s(3582),c=s(5026),l=s(2190),m=s(1185);l(),t.use(r),t.use(u(c)),t.use(e.json()),t.use(d()),t.use("/",e.static(n.join(__dirname,"public"))),t.use("/",s(8201)),t.use("/admins",s(1177)),t.use("/undergrads",s(8402)),t.use("/auth",s(6228)),t.use("/undergraduteApplicants",s(9548)),t.use("/honors",s(3189)),t.use("/honors/user",s(1062)),t.use("/undergradeReviews",s(8842)),t.use("/undergradeReviews/user",s(6845)),t.use("/undergradeReviews/id",s(4335)),t.use("/activities",s(7821)),t.use("/activities/user",s(4271)),t.use("/essays",s(5225)),t.use("/essays/user",s(6645)),t.use("/recommendations",s(7768)),t.use("/recommendations/user",s(6587)),t.use("/aids",s(2363)),t.use("/aids/user",s(360)),t.all("*",((e,t)=>{t.status(404),e.accepts("html")?t.sendFile(n.join(__dirname,"views","404.html")):e.accepts("json")?t.json({message:"404 not found"}):t.type("txt").send("404 not found")})),t.use(i),m.connection.once("open",(()=>{console.log("Connected to mongoDB"),t.listen(a,(()=>console.log(`Server is running on ${a} `)))})),m.connection.on("error",(e=>{console.log(e),o(`${e.no}: ${e.code}\t${e.syscall}\t${e.hostname}`,"mongoDBErrLog.log")}))})()})();